<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#f1f5f9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Vena Pictures">
    <title>Vena Pictures</title>
    <!-- Tailwind CSS loaded via build process -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
      :root {
        /* App Dashboard Colors */
        --color-bg: #f1f5f9; /* slate-100 */
        --color-surface: #ffffff;
        --color-text-light: #020617; /* slate-950 */
        --color-text-primary: #334155; /* slate-700 */
        --color-text-secondary: #64748b; /* slate-500 */
        --color-accent: #3b82f6; /* blue-500 */
        --color-accent-hover: #2563eb; /* blue-600 */
        --color-accent-light: #73a7f8;
        --color-accent-dark: #3575dc;
        --color-accent-hsl: 217 91% 60%;
        --color-border: #e2e8f0; /* slate-200 */
        --color-input-bg: #f8fafc; /* slate-50 */
        --color-success: #16a34a; /* green-600 */
        --color-danger: #dc2626; /* red-600 */
        
        /* Public Pages (Portals, Forms) High-Contrast Defaults */
        --public-bg: #f6f9fc; /* slightly darker than slate-50 for separation */
        --public-surface: #ffffff;
        --public-border: #cbd5e1; /* slate-300 for clearer delineation */
        --public-text-primary: #0f172a; /* slate-900 */
        --public-text-secondary: #475569; /* slate-600 (darker than slate-500) */
        --public-accent: #2563eb; /* blue-600 */
        --public-accent-hover: #1d4ed8; /* blue-700 */
        --public-accent-hsl: 221 83% 53%;
        
        /* iOS Safe Area Variables */
        --safe-area-inset-top: env(safe-area-inset-top, 0px);
        --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
        --safe-area-inset-left: env(safe-area-inset-left, 0px);
        --safe-area-inset-right: env(safe-area-inset-right, 0px);
        
        color-scheme: light;
      }
      
      html.dark {
        /* App Dashboard Colors */
        --color-bg: #0f172a; /* slate-900 */
        --color-surface: #1e293b; /* slate-800 */
        --color-text-light: #f1f5f9; /* slate-100 */
        --color-text-primary: #cbd5e1; /* slate-300 */
        --color-text-secondary: #94a3b8; /* slate-400 */
        --color-accent: #60a5fa; /* blue-400 */
        --color-accent-hover: #3b82f6; /* blue-500 */
        --color-accent-light: #80b7fa;
        --color-accent-dark: #5694e1;
        --color-accent-hsl: 217 96% 68%;
        --color-border: #334155; /* slate-700 */
        --color-input-bg: #0f172a; /* slate-900 */
        --color-success: #4ade80; /* green-400 */
        --color-danger: #f87171; /* red-400 */

        /* Public Pages (Portals, Forms) Default Colors */
        --public-bg: #020617; /* slate-950 */
        --public-surface: #0f172a; /* slate-900 */
        --public-border: #1e293b; /* slate-800 */
        --public-text-primary: #f1f5f9; /* slate-100 */
        --public-text-secondary: #94a3b8; /* slate-400 */
        --public-accent: #60a5fa; /* blue-400 */
        --public-accent-hover: #3b82f6; /* blue-500 */
        --public-accent-hsl: 217 96% 68%;
        
        color-scheme: dark;
      }

      body {
        font-family: 'Manrope', 'sans-serif';
        background-color: var(--color-bg);
        color: var(--color-text-primary);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        -webkit-touch-callout: none;
        /* Optimize scrolling for mobile */
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
        /* --- [UPDATED] Prevent horizontal scroll & hide vertical scrollbar --- */
        overflow-x: hidden;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none;  /* IE and Edge */
      }

      /* iOS Safe Area Support */
      body.app-theme {
        padding-top: var(--safe-area-inset-top);
        padding-bottom: var(--safe-area-inset-bottom);
        padding-left: var(--safe-area-inset-left);
        padding-right: var(--safe-area-inset-right);
      }
      
      /* Enhanced Responsive Typography with Mobile Focus */
      .text-xs   { font-size: clamp(0.7rem, 0.2vw + 0.65rem, 0.75rem); line-height: 1.4; }
      .text-sm   { font-size: clamp(0.8rem, 0.3vw + 0.7rem, 0.875rem); line-height: 1.4; }
      .text-base { font-size: clamp(0.9rem, 0.4vw + 0.8rem, 1rem); line-height: 1.5; }
      .text-lg   { font-size: clamp(1rem, 0.5vw + 0.9rem, 1.125rem); line-height: 1.5; }
      .text-xl   { font-size: clamp(1.1rem, 0.6vw + 1rem, 1.25rem); line-height: 1.4; }
      .text-2xl  { font-size: clamp(1.3rem, 1vw + 1.1rem, 1.5rem); line-height: 1.3; }
      .text-3xl  { font-size: clamp(1.6rem, 1.5vw + 1.3rem, 1.875rem); line-height: 1.2; }

      /* Hide scrollbar for Chrome, Safari, and Opera */
      ::-webkit-scrollbar {
        display: none;
      }

      /* Enhanced Animations */
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      @keyframes slideUp {
        from { 
          opacity: 0; 
          transform: translateY(20px); 
        }
        to { 
          opacity: 1; 
          transform: translateY(0); 
        }
      }
      
      @keyframes slideDown {
        from { 
          opacity: 0; 
          transform: translateY(-20px); 
        }
        to { 
          opacity: 1; 
          transform: translateY(0); 
        }
      }
      
      @keyframes bounceSubtle {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
      }
      
      @keyframes pulseSoft {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
      }
      
      @keyframes scaleIn {
        from { 
          opacity: 0; 
          transform: scale(0.95); 
        }
        to { 
          opacity: 1; 
          transform: scale(1); 
        }
      }

      /* Notification Animation Enhanced */
      @keyframes fadeInOut {
        0% { opacity: 0; transform: translateY(-20px) scale(0.95); }
        15% { opacity: 1; transform: translateY(0) scale(1); }
        85% { opacity: 1; transform: translateY(0) scale(1); }
        100% { opacity: 0; transform: translateY(-20px) scale(0.95); }
      }
      .animate-fade-in-out { animation: fadeInOut 3s ease-in-out forwards; }
      
      /* --- Text Gradient Enhanced --- */
      .text-gradient {
        background: linear-gradient(135deg, var(--public-accent), var(--public-accent-hover));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        background-size: 200% 200%;
        animation: gradient-shift 3s ease infinite;
      }
      body.app-theme .text-gradient {
        background: linear-gradient(135deg, var(--color-accent), var(--color-accent-dark));
         -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        background-size: 200% 200%;
      }
      
      @keyframes gradient-shift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      /* --- Enhanced Touch-Friendly Form Elements --- */
      .input-group {
        position: relative;
      }

      /* Enhanced Input Fields with Touch Optimization */
      .input-field {
        display: block;
        width: 100%;
        min-height: 48px; /* Apple recommended minimum touch target */
        padding: 1.6rem 1rem 0.6rem;
        font-family: inherit;
        font-size: max(16px, 1rem); /* Prevent zoom on iOS */
        font-weight: 500;
        color: var(--color-text-light);
        background-color: var(--color-input-bg);
        border: 2px solid var(--color-border);
        border-radius: 12px;
        outline: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        box-shadow: 0 0 0 0 transparent;
      }
      
      /* Enhanced Focus State */
      .input-field:focus {
        border-color: var(--color-accent);
        box-shadow: 0 0 0 4px hsla(var(--color-accent-hsl), 0.15);
        transform: translateY(-1px);
      }

      /* Enhanced Floating Labels */
      .input-label {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: 1rem;
        font-size: max(16px, 1rem);
        color: var(--color-text-secondary);
        pointer-events: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        padding: 0 0.25rem;
        background-color: var(--color-input-bg);
        white-space: nowrap;
      }
      
      .input-field:focus + .input-label,
      .input-field:not(:placeholder-shown) + .input-label {
        top: 0;
        transform: translateY(-50%) scale(0.8);
        transform-origin: left;
        font-weight: 600;
        color: var(--color-accent);
        left: 0.75rem;
      }
      
      .input-field:not(:placeholder-shown):not(:focus) + .input-label {
        color: var(--color-text-secondary);
      }
      
      /* Enhanced Helper Text */
      .input-helper-text {
        font-size: 0.8rem;
        color: var(--color-text-secondary);
        padding: 0.5rem 1rem 0;
        line-height: 1.4;
      }
      
      /* Enhanced Textarea */
      textarea.input-field {
        height: auto;
        min-height: 120px;
        resize: vertical;
      }
      
      /* Enhanced Select */
      select.input-field {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 1rem center;
        background-repeat: no-repeat;
        background-size: 1.25em 1.25em;
        padding-right: 3rem;
      }
      html.dark select.input-field {
         background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2394a3b8' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
      }
      
      /* Enhanced Checkbox & Radio */
      input[type="checkbox"], input[type="radio"] {
        width: 20px;
        height: 20px;
        min-width: 20px;
        min-height: 20px;
        border-radius: 6px;
        color: var(--color-accent);
        border: 2px solid var(--color-text-secondary);
        background-color: transparent;
        transition: all 0.2s ease;
      }
      
      input[type="radio"] {
        border-radius: 50%;
      }
      
      input[type="checkbox"]:checked, input[type="radio"]:checked {
        border-color: var(--color-accent);
        background-color: var(--color-accent);
        background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
      }

      /* Enhanced Date Input */
      input[type="date"] {
        font-size: max(16px, 1rem);
      }
      
      input[type="date"]::-webkit-calendar-picker-indicator {
          cursor: pointer;
          opacity: 0.6;
          filter: invert(var(--dark-mode-filter, 0));
          transition: opacity 0.2s;
          width: 20px;
          height: 20px;
      }
       html.dark input[type="date"]::-webkit-calendar-picker-indicator {
           filter: invert(1);
      }
      input[type="date"]::-webkit-calendar-picker-indicator:hover {
          opacity: 1;
      }
      
      /* --- Enhanced Input with Icon --- */
      .input-with-icon {
        position: relative;
      }
      
      .input-with-icon input {
        display: block;
        width: 100%;
        min-height: 48px;
        padding: 0 1rem 0 3.5rem;
        line-height: 48px;
        font-family: inherit;
        font-size: max(16px, 1rem);
        font-weight: 500;
        color: var(--color-text-light);
        background-color: var(--color-input-bg);
        border: 2px solid var(--color-border);
        border-radius: 12px;
        outline: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
      }
      
      .input-with-icon .input-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--color-text-secondary);
        pointer-events: none;
        width: 20px;
        height: 20px;
      }

      .input-with-icon input::placeholder {
        color: var(--color-text-secondary);
        opacity: 1;
      }
      
      .input-with-icon input:focus {
        border-color: var(--color-accent);
        box-shadow: 0 0 0 4px hsla(var(--color-accent-hsl), 0.15);
        transform: translateY(-1px);
      }

      /* --- Enhanced Button Styles --- */
      .button-primary {
        font-weight: 600;
        min-height: 48px;
        padding: clamp(0.75rem, 1vw + 0.5rem, 1rem) clamp(1.5rem, 2vw + 1rem, 2rem);
        font-size: clamp(0.875rem, 0.5vw + 0.75rem, 1rem);
        border-radius: 12px;
        color: white;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border: none;
        background: linear-gradient(135deg, var(--color-accent-light), var(--color-accent));
        box-shadow: 0 4px 15px -3px hsla(var(--color-accent-hsl), 0.4), 0 2px 8px -2px hsla(var(--color-accent-hsl), 0.3);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        white-space: nowrap;
        position: relative;
        overflow: hidden;
        transform: translateZ(0);
      }
      
      .button-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.6s;
      }
      
      .button-primary:hover {
        background: linear-gradient(135deg, var(--color-accent), var(--color-accent-dark));
        box-shadow: 0 8px 25px -3px hsla(var(--color-accent-hsl), 0.5), 0 4px 12px -2px hsla(var(--color-accent-hsl), 0.4);
        transform: translateY(-2px) scale(1.02);
      }
      
      .button-primary:hover::before {
        left: 100%;
      }
      
      .button-primary:active {
        transform: translateY(-1px) scale(0.98);
        box-shadow: 0 4px 15px -3px hsla(var(--color-accent-hsl), 0.4);
        transition: all 0.1s ease;
      }
      
      .button-primary:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
        background: linear-gradient(135deg, var(--color-accent-light), var(--color-accent));
      }

      .button-secondary {
        font-weight: 600;
        min-height: 48px;
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
        background-color: var(--color-input-bg);
        color: #475569;
        border: 2px solid var(--color-border);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }
      
      html.dark .button-secondary {
        color: var(--color-text-primary);
      }
      
      .button-secondary:hover {
        color: #1e293b;
        background-color: #e2e8f0;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.1);
      }
      
       html.dark .button-secondary:hover {
        color: var(--color-text-light);
        background-color: #475569;
      }
      
      .button-secondary:active {
        background-color: #cbd5e1;
        color: #1e293b;
        transform: translateY(0);
      }
      
       .button-secondary:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }
      
      /* --- Enhanced Widget Animation --- */
      @keyframes widget-fade-in-up {
        from { 
          opacity: 0; 
          transform: translateY(30px) scale(0.95);
        }
        to { 
          opacity: 1; 
          transform: translateY(0) scale(1);
        }
      }
      
      .widget-animate {
        animation: widget-fade-in-up 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        opacity: 0;
      }
      
      /* Timeline Line Animation Enhanced */
      @keyframes draw-line-ver {
        from { transform: scaleY(0); opacity: 0.5; }
        to { transform: scaleY(1); opacity: 1; }
      }
      
      /* --- Enhanced Mobile Navigation --- */
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: var(--color-surface);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        box-shadow: 0 -4px 20px -4px rgba(0, 0, 0, 0.1);
        z-index: 50;
        border-top: 1px solid var(--color-border);
        padding-bottom: var(--safe-area-inset-bottom);
        /* Enhance touch responsiveness */
        min-height: calc(64px + var(--safe-area-inset-bottom));
      }
      
      .bottom-nav button {
        min-height: 48px;
        min-width: 48px;
        border-radius: 8px;
        transition: all 0.2s ease;
      }
      
      .bottom-nav button:active {
        transform: scale(0.95);
        background-color: var(--color-input-bg);
      }

      /* --- Enhanced Public Pages Styles --- */
      .public-page-body {
        background-color: var(--public-bg);
        color: var(--public-text-primary);
        font-family: 'Manrope', 'sans-serif';
      }
      .public-page-body .button-primary {
         background: linear-gradient(135deg, var(--public-accent), var(--public-accent-hover));
         box-shadow: 0 4px 15px -3px hsla(var(--public-accent-hsl), 0.4), 0 2px 8px -2px hsla(var(--public-accent-hsl), 0.3);
      }
      .public-page-body .button-secondary {
         background-color: var(--public-surface);
         color: var(--public-text-secondary);
         border-color: var(--public-border);
      }
       .public-page-body .input-field {
        background-color: var(--public-surface);
        border-color: var(--public-border);
        color: var(--public-text-primary);
       }
       .public-page-body .input-field:focus {
         border-color: var(--public-accent);
         box-shadow: 0 0 0 4px hsla(var(--public-accent-hsl), 0.15);
       }
        .public-page-body .input-label {
         background-color: var(--public-surface);
         color: var(--public-text-secondary);
       }
       .public-page-body .input-field:focus + .input-label,
       .public-page-body .input-field:not(:placeholder-shown) + .input-label {
         color: var(--public-accent);
       }

      /* Enhanced Timeline */
      .timeline-item {
        position: relative;
        padding-left: 2.5rem;
        padding-bottom: 2rem;
      }
      .timeline-item:last-child {
        padding-bottom: 0;
      }
      .timeline-item::before {
        content: '';
        position: absolute;
        left: 11px;
        top: 24px;
        bottom: 0;
        width: 2px;
        background: linear-gradient(180deg, var(--public-accent), var(--public-border));
        transform-origin: top;
        animation: draw-line-ver 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
        animation-delay: var(--animation-delay, 0s);
      }
      .timeline-item:last-child::before {
        display: none;
      }

      .timeline-icon-container {
        position: absolute;
        left: 0;
        top: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 1.5rem;
        height: 1.5rem;
        border-radius: 50%;
        z-index: 10;
        background-color: var(--public-bg);
        box-shadow: 0 0 0 3px var(--public-accent);
        transition: all 0.3s ease;
      }
      
      @keyframes pulse-ring {
        0% { box-shadow: 0 0 0 0 hsla(var(--public-accent-hsl), 0.7); }
        70% { box-shadow: 0 0 0 15px hsla(var(--public-accent-hsl), 0); }
        100% { box-shadow: 0 0 0 0 hsla(var(--public-accent-hsl), 0); }
      }
      
      .timeline-icon-container.active-pulse {
          animation: pulse-ring 2s infinite;
      }
      
      /* --- Enhanced Responsive Document Tables --- */
      @media screen and (max-width: 640px) {
        .printable-content .responsive-table thead {
            display: none;
        }
        .printable-content .responsive-table tr {
            display: block;
            border: 1px solid var(--public-border, #e2e8f0);
            border-radius: 8px;
            margin-bottom: 1rem;
            padding: 1rem;
        }
        .printable-content .responsive-table td {
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: right !important;
            padding: 0.5rem 0;
            border-bottom: 1px dotted var(--public-border, #e2e8f0);
        }
        .printable-content .responsive-table td:last-child {
            border-bottom: 0;
        }
        .printable-content .responsive-table td::before {
            content: attr(data-label);
            font-weight: 600;
            color: var(--public-text-secondary, #64748b);
            text-align: left;
            margin-right: 1rem;
        }
        .doc-header-grid {
            grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
        }
        .doc-footer-flex {
            flex-direction: column !important;
            align-items: stretch !important;
        }
        .doc-footer-flex > div {
            width: 100% !important;
        }
      }

      /* Enhanced Print Styles moved to app/index.css to avoid conflicts */

      /* --- Enhanced Mobile Responsive Styles --- */
      
      /* Mobile Phones (Portrait) */
      @media (max-width: 480px) and (orientation: portrait) {
        .text-xs   { font-size: 0.7rem; }
        .text-sm   { font-size: 0.8rem; }
        .text-base { font-size: 0.9rem; }
        .text-lg   { font-size: 1rem; }
        .text-xl   { font-size: 1.1rem; }
        .text-2xl  { font-size: 1.25rem; }
        .text-3xl  { font-size: 1.5rem; }
        
        .button-primary, .button-secondary {
          min-height: 44px;
          padding: 0.625rem 1.25rem;
          font-size: 0.875rem;
        }
      }
      
      /* iPad and Tablets */
      @media (min-width: 768px) and (max-width: 1024px) {
        .grid-cols-1 {
          grid-template-columns: repeat(1, minmax(0, 1fr));
        }
        
        /* Two columns for tablet landscape */
        .xl\\:grid-cols-12 {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        
        /* Optimize for iPad Pro */
        @media (min-width: 834px) {
          .xl\\:grid-cols-12 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
          }
        }
      }
      
      /* General Mobile Optimizations */
      @media (max-width: 768px) {
        /* Make document modals full-width on mobile */
        .modal-content-area .printable-area .printable-content {
            max-width: none !important;
            width: 100% !important;
            padding: 1rem !important;
            box-shadow: none !important;
            font-size: 0.875rem !important;
        }
        .modal-content-area .printable-area .printable-content h1,
        .modal-content-area .printable-area .printable-content h2,
        .modal-content-area .printable-area .printable-content h3 {
          font-size: 1.25rem !important;
        }
        .modal-content-area .printable-area .printable-content .text-3xl {
            font-size: 1.5rem !important;
        }

        /* Adjust timeline for smaller screens */
        .timeline-item {
            padding-left: 1.5rem;
        }
        .timeline-item::before {
            left: 11px;
        }
        .timeline-icon-container {
            left: 0;
        }
        
        /* Calendar Responsiveness */
        .calendar-grid-container {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
        /* removed empty .calendar-grid ruleset to avoid lint warning */
        .calendar-grid > div {
          min-height: 80px;
          padding: 0.25rem;
        }
        
        /* Enhanced touch targets */
        button, .button-primary, .button-secondary, 
        input[type="button"], input[type="submit"], 
        a[role="button"], [role="button"] {
          min-height: 44px;
          min-width: 44px;
        }
        
        /* Card layouts optimization */
        .bg-brand-surface {
          border-radius: 16px;
          box-shadow: 0 4px 20px -4px rgba(0, 0, 0, 0.1);
        }
        
        /* Modal enhancements for mobile */
        .fixed.inset-0 {
          padding: 1rem;
        }
        
        /* Sidebar improvements */
        .w-64 {
          width: 280px;
        }
        
        /* Grid spacing adjustments */
        .gap-6 {
          gap: 1rem;
        }
        
        .gap-4 {
          gap: 0.75rem;
        }
        
        /* Padding adjustments */
        .p-4 {
          padding: 1rem;
        }
        
        .p-6 {
          padding: 1.25rem;
        }
        
        .px-4 {
          padding-left: 1rem;
          padding-right: 1rem;
        }
        
        .py-4 {
          padding-top: 1rem;
          padding-bottom: 1rem;
        }
      }
      
      /* iPhone specific optimizations */
      @media (max-width: 480px) {
        /* Compact spacing for small screens */
        .gap-6 {
          gap: 0.75rem;
        }
        
        .gap-4 {
          gap: 0.5rem;
        }
        
        .p-6 {
          padding: 1rem;
        }
        
        .px-6 {
          padding-left: 1rem;
          padding-right: 1rem;
        }
        
        /* Make cards more compact */
        .rounded-2xl {
          border-radius: 12px;
        }
        
        /* Optimize header for small screens */
        .h-20 {
          height: 64px;
        }
        
        /* Bottom navigation adjustments */
        .bottom-nav {
          min-height: calc(56px + var(--safe-area-inset-bottom));
        }
      }
      
      /* Landscape phone optimizations */
      @media (max-height: 480px) and (orientation: landscape) {
        .bottom-nav {
          display: none;
        }
        
        .pb-24 {
          padding-bottom: 1rem;
        }
      }
      
      /* High DPI displays */
      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        .border {
          border-width: 0.5px;
        }
      }
      
      /* Reduce motion for accessibility */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
      
      /* Template-specific styles */
      .classic-template {
          font-family: 'Georgia', 'Times New Roman', serif;
      }

      .classic-template .text-gradient {
          background: linear-gradient(135deg, #374151, #1f2937);
          -webkit-background-clip: text;
          background-clip: text;
          -webkit-text-fill-color: transparent;
      }

      .classic-template .text-shadow-lg {
          text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      .classic-template .text-shadow-md {
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .classic-template .text-shadow-sm {
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      /* Modern Template Styles */
      .modern-template {
          font-family: 'Inter', 'Segoe UI', 'Roboto', sans-serif;
      }

      .modern-template .animate-fade-in-up {
          animation: fadeInUp 0.8s ease-out forwards;
      }

      .modern-template .delay-300 {
          animation-delay: 0.3s;
      }

      .modern-template .delay-500 {
          animation-delay: 0.5s;
      }

      .modern-template .delay-700 {
          animation-delay: 0.7s;
      }

      .modern-template .animate-gradient {
          background: linear-gradient(-45deg, #3b82f6, #8b5cf6, #ec4899, #3b82f6);
          background-size: 400% 400%;
          animation: gradientShift 3s ease infinite;
      }

      @keyframes fadeInUp {
          from {
              opacity: 0;
              transform: translateY(30px);
          }
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }

      @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
      }

      /* Gallery Template Styles */
      .gallery-template {
          font-family: 'Poppins', 'Segoe UI', sans-serif;
      }

      .gallery-template .animate-pulse {
          animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @keyframes pulse {
          0%, 100% {
              opacity: 1;
          }
          50% {
              opacity: 0.5;
          }
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
          .classic-template h1 {
              font-size: 2.5rem;
          }

          .modern-template h1 {
              font-size: 3rem;
          }

          .gallery-template h1 {
              font-size: 3rem;
          }
      }

      /* Smooth scrolling */
      html {
          scroll-behavior: smooth;
      }

      /* Custom scrollbar for templates */
      .classic-template::-webkit-scrollbar {
          width: 8px;
      }

      .classic-template::-webkit-scrollbar-track {
          background: #f1f5f9;
      }

      .classic-template::-webkit-scrollbar-thumb {
          background: #94a3b8;
          border-radius: 4px;
      }

      .classic-template::-webkit-scrollbar-thumb:hover {
          background: #64748b;
      }

      .modern-template::-webkit-scrollbar {
          width: 8px;
      }

      .modern-template::-webkit-scrollbar-track {
          background: #1e293b;
      }

      .modern-template::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 4px;
      }

      .modern-template::-webkit-scrollbar-thumb:hover {
          background: #64748b;
      }

      .gallery-template::-webkit-scrollbar {
          width: 8px;
      }

      .gallery-template::-webkit-scrollbar-track {
          background: #fef3c7;
      }

      .gallery-template::-webkit-scrollbar-thumb {
          background: #f59e0b;
          border-radius: 4px;
      }

      .gallery-template::-webkit-scrollbar-thumb:hover {
          background: #d97706;
      }
    </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "react/": "https://esm.sh/react@18.2.0/",
    "react-dom/": "https://esm.sh/react-dom@18.2.0/",
    "@google/genai": "https://esm.sh/@google/genai@^1.15.0"
  }
}
</script>
<script>
  // Enhanced theme detection with system preference support
  function getInitialTheme() {
    if (localStorage.theme === 'dark' || 
        (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      return 'dark';
    }
    return 'light';
  }
  
  function applyTheme(theme) {
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }
  
  // Apply initial theme
  applyTheme(getInitialTheme());
  
  // Listen for system theme changes
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
    if (!localStorage.theme) {
      applyTheme(e.matches ? 'dark' : 'light');
    }
  });
  
  // Optimize scrolling performance
  document.addEventListener('DOMContentLoaded', function() {
    // Add momentum scrolling for iOS
    const scrollableElements = document.querySelectorAll('.overflow-y-auto, .overflow-x-auto');
    scrollableElements.forEach(element => {
      element.style.webkitOverflowScrolling = 'touch';
    });
  });
</script>
  </head>
  <body class="bg-brand-bg text-brand-text-primary">
    <div id="root"></div>
    <style id="public-theme-style"></style>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>